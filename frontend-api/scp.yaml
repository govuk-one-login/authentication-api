scp: "0.1.0"

system:
  urn: "urn:scp:govuk-one-login:authentication-internal-api"
  name: "Authentication Internal API"
  description: "Internal authentication API for GOV.UK One Login handling user authentication for the authentication-frontend"

ownership:
  team: "authentication"
  contacts:
    - type: "slack"
      ref: "#di-authentication"

provides:
  - capability: "authentication-internal-api"
    type: "rest"
    contract:
      type: "openapi"
      ref: "./ci/openAPI/AuthInternalApi.yaml"

depends:
  - system: "urn:scp:govuk:notify"
    capability: "send-notifications"
    type: "rest"
    criticality: "required"
    failure_mode: "queue-buffer"
    description: "Sends SMS and email notifications to users"
  - system: "urn:scp:govuk-one-login:ticf-cri"
    capability: "fraud-assessment"
    type: "rest"
    criticality: "optional"
    failure_mode: "fallback"
    description: "Fraud and risk assessment service"
  - system: "urn:scp:govuk-one-login:account-interventions"
    capability: "intervention-check"
    type: "event"
    criticality: "optional"
    failure_mode: "fallback"
    description: "Account security interventions and blocks"
  - system: "urn:scp:aws:dynamodb"
    capability: "long-term-storage"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "User profiles, credentials, tokens, authentication state, and lockout data"
  - system: "urn:scp:aws:elasticache"
    capability: "short-term-storage"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Session storage, OTP codes, and lockout data"
  - system: "urn:scp:aws:sqs"
    capability: "message-queue"
    type: "stream"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Email notifications and audit events"
  - system: "urn:scp:aws:kms"
    capability: "encryption-and-signatures"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Encryption and signing keys for data protection and JWT tokens"
  - system: "urn:scp:aws:api-gateway"
    capability: "api-routing"
    type: "rest"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "API Gateway for request routing and authentication"
  - system: "urn:scp:aws:lambda"
    capability: "serverless-compute"
    type: "rest"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Serverless compute runtime"
  - system: "urn:scp:aws:vpc"
    capability: "network-isolation"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Private network and VPC endpoints"
  - system: "urn:scp:aws:cloudwatch"
    capability: "log-aggregation"
    type: "stream"
    criticality: "optional"
    failure_mode: "queue-buffer"
    description: "Logging, metrics, and monitoring"
