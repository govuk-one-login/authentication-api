scp: "0.1.0"

system:
  urn: "urn:scp:govuk-one-login:authentication-internal-api"
  name: "Authentication Internal API"
  description: "Internal authentication API for GOV.UK One Login handling user authentication for the authentication-frontend"

ownership:
  team: "authentication"

provides:
  - capability: "authentication-internal-api"
    type: "rest"
    contract:
      type: "openapi"
      ref: "./ci/openAPI/AuthInternalApi.yaml"

depends:
  - system: "urn:scp:govuk:notify"
    type: "rest"
    criticality: "required"
    failure_mode: "degrade"
    description: "Sends SMS and email notifications to users"
  - system: "urn:scp:aws:dynamodb"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "User profiles, credentials, tokens, authentication state, and lockout data"
  - system: "urn:scp:aws:elasticache"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Session storage, OTP codes, and lockout data"
  - system: "urn:scp:aws:sqs"
    type: "stream"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Email notifications and audit events"
  - system: "urn:scp:aws:kms"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Encryption and signing keys for data protection and JWT tokens"
