scp: "0.1.0"

system:
  urn: "urn:scp:govuk-one-login:account-management-api"
  name: "Account Management API"
  description: "Account Management API for GOV.UK One Login used by the Home team to enable users to manage their account settings"

ownership:
  team: "authentication"
  contacts:
    - type: "slack"
      ref: "#di-authentication"

provides:
  - capability: "account-management-api"
    type: "rest"
    contract:
      type: "openapi"
      ref: "./api-contract/openapi_v3_unreleased.yaml"

depends:
  - system: "urn:scp:govuk:notify"
    capability: "send-notifications"
    type: "rest"
    criticality: "required"
    failure_mode: "queue-buffer"
    description: "Sends email notifications to users"
  - system: "urn:scp:govuk-one-login:account-interventions"
    capability: "intervention-check"
    type: "rest"
    criticality: "optional"
    failure_mode: "fallback"
    description: "Account security interventions (used in authenticate endpoint)"
  - system: "urn:scp:aws:dynamodb"
    capability: "long-term-storage"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "User profiles, credentials, and MFA methods"
  - system: "urn:scp:aws:elasticache"
    capability: "short-term-storage"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Session storage for account management"
  - system: "urn:scp:aws:sqs"
    capability: "message-queue"
    type: "stream"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Email notifications and audit events"
  - system: "urn:scp:aws:kms"
    capability: "encryption-and-signatures"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Encryption and signing keys for data protection"
  - system: "urn:scp:aws:api-gateway"
    capability: "api-routing"
    type: "rest"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "API Gateway for request routing and OAuth authorization"
  - system: "urn:scp:aws:lambda"
    capability: "serverless-compute"
    type: "rest"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Serverless compute runtime"
  - system: "urn:scp:aws:vpc"
    capability: "network-isolation"
    type: "data"
    criticality: "required"
    failure_mode: "fail-fast"
    description: "Private network and VPC endpoints"
  - system: "urn:scp:aws:cloudwatch"
    capability: "log-aggregation"
    type: "stream"
    criticality: "optional"
    failure_mode: "queue-buffer"
    description: "Logging, metrics, and monitoring"
